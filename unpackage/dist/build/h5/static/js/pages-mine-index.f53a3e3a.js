(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-index"],{"01a1":function(e,t,n){"use strict";n.r(t);var r=n("097b"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"097b":function(e,t,n){"use strict";var r=n("4ea4");n("4de4"),n("4e82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=r(n("1da1")),i=n("0dcc"),o=n("145d"),u={data:function(){return{funcList:[{type:1,title:"功能介绍",pages:"/pages/mine/instruction-use",imgUrl:"/static/img/home/instruction-use.png"},{type:1,title:"意见反馈",pages:"",imgUrl:"/static/img/home/advice-feedback.png"},{type:1,title:"关于我们",pages:"/pages/mine/about-mine",imgUrl:"/static/img/home/about-mine.png"},{type:2,title:"联系客服",tel:this.telPhone,imgUrl:"/static/img/home/contact-mine.png"},{type:1,title:"角色切换",pages:"/pages/mine/switch-roleType",imgUrl:"/static/img/home/switch-type.png"}],parentId:null,roleType:null,childreList:[],wxAvter:"/static/img/home/avter.png",telPhone:"18285104102"}},onLoad:function(){this.getInitDate(),this.getCompney()},methods:{getInitDate:function(){try{var e=uni.getStorageSync("roleType");if(this.roleType=e,-1==e)return void this.checkBoundAccount(e);1==e?this.getParentFun():this.getInitDate()}catch(t){console.log("我的页面初始化数据出错"+t)}},getParentFun:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=uni.getStorageSync("wxUserInfo"),r=uni.getStorageSync("parentId"),!n||!r){t.next=11;break}return e.wxAvter=n.headImgUrl,t.next=7,(0,i.getChilderList)(r);case 7:a=t.sent,a.length?e.childreList=a.filter((function(e){return e.studentId&&e.studentParentId&&e.student})).sort((function(e){return e.loginFlag})):e.$Q.tipUrl({tip:"学生数据为空,重新绑定",url:"/parent/home/add-baby"}),t.next=12;break;case 11:e.getParentFun();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),console.log("获取数据错误"+t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},funcItem:function(e){if(2!=e.type){if(1==e.type){if(!e.pages)return void this.$Q.tipUrl({tip:"此功能暂未开放"});uni.navigateTo({url:e.pages})}}else(0,o.commonTelPhone)("暂无"==this.telPhone?"":this.telPhone)},addBabay:function(){this.checkBoundAccount()||(this.childreList.length>=10?this.$Q.tipUrl({tip:"只能绑定10个学生"}):uni.navigateTo({url:"/parent/home/add-baby"}))},switchStudent:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={parentId:e.studentParentId,studentId:e.studentId},n.next=3,(0,i.setSwicthStudent)(r);case 3:a=n.sent,a&&(uni.setStorageSync("userId",e.student.userId),uni.setStorageSync("student",e.student),t.$Q.tipUrl({tip:"切换成功",url:"/pages/index/index",isTab:!0}),uni.removeStorageSync("cardDate"));case 5:case"end":return n.stop()}}),n)})))()},getCompney:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.getFieldList)("staffService",!1);case 3:n=t.sent,n.length?e.telPhone=n[0].code||"暂无":e.telPhone="暂无",t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},checkBoundAccount:function(e){return(-1==this.roleType||-1==e)&&(this.$Q.tipUrl({tip:"检测未绑定账号",url:"/parent/home/select-role"}),!0)}},filters:{getChildrenName:function(e){return e[0]&&e[0].studentParent&&e[0].studentParent.parentName?e[0].studentParent.parentName:"检测暂未绑定"},getChildrenPhone:function(e){return e[0]&&e[0].studentParent&&e[0].studentParent.parentPhone?e[0].studentParent.parentPhone:"检测暂未绑定"}}};t.default=u},"0dcc":function(e,t,n){"use strict";var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.boundSaveInfo=t.getVertryCode=t.getOpenIDList=t.setStateRecords=t.getPhoneDate=t.setDeleteStudent=t.setSwicthStudent=t.getChilderList=t.addBindStudent=t.getClassesList=t.getFieldList=void 0,n("96cf");var a=r(n("1da1")),i=r(n("368e")),o=n("033a"),u=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.next=3,i.default.post(o.COM_FIELD_LIST,{field:t},{load:n});case 3:if(r=e.sent,0!=r.code||!r.data.length){e.next=8;break}return e.abrupt("return",r.data);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getFieldList=u;var c=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post(o.COM_AREA_SCHOOL_CLASSES_LIST);case 2:if(t=e.sent,0!=t.code||!t.data.length){e.next=7;break}return e.abrupt("return",t.data);case 7:return b("获取学校班级列表数据为空,联系客服"),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.getClassesList=c;var s=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post(o.ADD_PARENT_BIND_STUDENT,t);case 2:if(n=e.sent,200!=n.code||1!=n.status){e.next=11;break}if(!n.data||!n.data.student){e.next=8;break}return e.abrupt("return",n.data);case 8:b("数据返回有误,联系客服");case 9:e.next=12;break;case 11:b(n.msg);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.addBindStudent=s;var d=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post(o.GET_PARENT_STUDENT_LIST,{parentId:t});case 2:if(n=e.sent,0!=n.code){e.next=11;break}if(!n.data){e.next=8;break}return e.abrupt("return",n.data);case 8:return e.abrupt("return",[]);case 9:e.next=12;break;case 11:b(n.msg);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getChilderList=d;var l=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post(o.SET_PARENT_STUDENT_LOGIN_INFO,t);case 2:if(n=e.sent,200!=n.code||1!=n.status){e.next=7;break}return e.abrupt("return","ok");case 7:b(childrenDate.msg);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.setSwicthStudent=l;var f=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.index){e.next=14;break}return e.next=3,uni.showModal({title:"删除绑定学生",content:"确定删除"+n.student.studentName+"?"});case 3:if(r=e.sent,!r[1].confirm){e.next=14;break}return e.next=7,i.default.post(o.REMOVE_PARENT_BIND_STUDENT,{parentId:n.studentParentId,studentId:n.studentId});case 7:if(a=e.sent,200!=a.code||1!=a.status){e.next=13;break}return b("删除成功"),e.abrupt("return","ok");case 13:b(a.msg);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.setDeleteStudent=f;var p=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,i.default.post(o.GET_ADDRESS_BOOK_BY_PARENT,{studentId:t,param:n});case 3:if(r=e.sent,!r){e.next=6;break}return e.abrupt("return",r);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getPhoneDate=p;var g=function(e){i.default.post(o.SET_LOGIN_INFO,{id:e},{load:!1})};t.setStateRecords=g;var m=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post(o.GET_USER_INFO_LIST,{openId:t});case 2:if(n=e.sent,200!=n.code||1!=n.status){e.next=11;break}if(!Array.isArray(n.data)){e.next=8;break}return e.abrupt("return",n.data);case 8:return e.abrupt("return",[]);case 9:e.next=13;break;case 11:return b(n.msg),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getOpenIDList=m;var h=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post(o.BOUND_VERIFY_CODE,t);case 2:if(n=e.sent,200!=n.code){e.next=11;break}if(1!=n.status){e.next=8;break}return e.abrupt("return",n.data);case 8:b("获取验证码失败,请重试");case 9:e.next=12;break;case 11:b(n.msg);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getVertryCode=h;var v=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.openId){e.next=3;break}return b("数据openId不存在,联系客服"),e.abrupt("return");case 3:return e.next=5,i.default.post(o.BOUND_SAVE_BIND,t);case 5:if(n=e.sent,200!=n.code){e.next=14;break}if(1!=n.status){e.next=11;break}return e.abrupt("return",n.data);case 11:b("绑定失败,重新绑定");case 12:e.next=15;break;case 14:b(n.msg);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.boundSaveInfo=v;var b=function(e){uni.showToast({duration:3e3,title:e,icon:"none",mask:!0})}},"145d":function(e,t,n){"use strict";var r=n("4ea4");n("ac1f"),n("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.depthClone=t.comUploadImg=t.commonTelPhone=t.deleteOperation=t.getWxJsSdk=void 0,n("96cf");var a=r(n("1da1")),i=r(n("368e")),o=r(n("aba9")),u=n("033a"),c=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post(u.SIGN_INFO,{url:window.location.href.split("#")[0]},{header:{"content-type":"application/x-www-form-urlencoded"},load:!1});case 2:t=e.sent,o.default.config({debug:!1,appId:t.appid,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["getLocation","openLocation","updateTimelineShareData","startRecord"]}),o.default.ready((function(){console.log("注入jssdk成功")})),o.default.error((function(e){console.log("注入jssdk失败"+e),c()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.getWxJsSdk=c;var s=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,u,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.e,r=t.tipTitle,a=t.tipContent,i=t.deleteApi,o=t.data,u=t.redirectUrl,c=t.type,s=t.confirmText,e.prev=1,!n||"删除"!=n.content.text){e.next=6;break}return e.abrupt("return",d(r,a,i,o,s));case 6:if(!n||"修改"!=n.content.text){e.next=10;break}uni.navigateTo({url:u}),e.next=11;break;case 10:return e.abrupt("return",d(r,a,i,o,c,s));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();t.deleteOperation=s;var d=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,n,r,a,o,u){var c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.showModal({title:t||"删除行为",content:n||"你确定要删除该项吗?",confirmText:u});case 2:if(c=e.sent,!c[1].confirm){e.next=13;break}return e.next=6,i.default.post(r,a);case 6:if(s=e.sent,200!=s.code||1!=s.status){e.next=12;break}return g(o?"设置成功":"删除成功"),e.abrupt("return","ok");case 12:g(s.msg);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o){return e.apply(this,arguments)}}(),l=function(e){e?uni.makePhoneCall({phoneNumber:e}):uni.showToast({title:"没有获取到号码",icon:"none",duration:3e3})};t.commonTelPhone=l;var f=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.chooseImage({count:1,sourceType:["album","camera"]});case 2:if(t=e.sent,!t[1].tempFilePaths){e.next=17;break}return uni.showLoading({title:"上传中...",mask:!0}),n=t[1].tempFilePaths[0],e.next=8,uni.uploadFile({url:u.BASE_URL+u.COM_UPLOAD_FILD,filePath:n,name:"file",formData:{userId:uni.getStorageSync("userId")}});case 8:if(r=e.sent,!r[1]){e.next=13;break}return uni.hideLoading(),a=r[1]["data"]&&JSON.parse(r[1]["data"]).data,e.abrupt("return",a);case 13:uni.hideLoading(),g("上传图片失败,重新上传"),e.next=18;break;case 17:g("选择图片失败,请重新选择");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.comUploadImg=f;var p=function(e){var t;if("object"===typeof e)t={};else{if(!Array.isArray(e))return t;t=[]}for(var n in e){var r=e[n];"object"===typeof r||Array.isArray(e)?t[n]=clone(r):t[n]=r}return t};t.depthClone=p;var g=function(e){uni.showToast({duration:3e3,title:e,icon:"none",mask:!0})}},"2f4e":function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"container-top"},[n("v-uni-view",{staticClass:"top-img"},[n("v-uni-image",{attrs:{mode:"aspectFill",src:e.wxAvter}})],1),n("v-uni-view",{staticClass:"top-content"},[n("v-uni-view",{staticClass:"content-name"},[e._v(e._s(e._f("getChildrenName")(e.childreList)))]),n("v-uni-view",{staticClass:"content-phone"},[e._v(e._s(e._f("getChildrenPhone")(e.childreList)))])],1)],1),n("v-uni-view",{staticClass:"container-main"},[n("v-uni-view",{staticClass:"main-func main-one"},[n("v-uni-view",{staticClass:"func-img"},[n("v-uni-image",{attrs:{mode:"aspectFill",src:"/static/img/home/mine-babay.png"}})],1),n("v-uni-view",{staticClass:"func-title"},[e._v("我的宝贝")]),n("v-uni-scroll-view",{staticClass:"func-icon",attrs:{"scroll-with-animation":"true","scroll-x":"true"}},[n("v-uni-view",{staticClass:"icon-add",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBabay.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{mode:"aspectFill",src:"/static/img/home/icon-babay-add.png"}})],1),e._l(e.childreList,(function(t,r){return n("v-uni-view",{key:r,staticClass:"icon-add",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.switchStudent(t)}}},[n("v-uni-image",{attrs:{mode:"aspectFill",src:t.iconLink||"/static/img/home/avter.png"}})],1)}))],2)],1),n("v-uni-view",{staticClass:"main-item"},e._l(e.funcList,(function(t,r){return n("v-uni-view",{key:r,staticClass:"main-func",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.funcItem(t)}}},[n("v-uni-view",{staticClass:"func-img"},[n("v-uni-image",{attrs:{mode:"aspectFill",src:t.imgUrl}})],1),n("v-uni-view",{staticClass:"func-title"},[e._v(e._s(t.title))]),2==t.type?n("v-uni-view",{staticClass:"func-phone"},[e._v(e._s(e.telPhone))]):n("v-uni-view",{staticClass:"func-right"},[n("v-uni-image",{attrs:{mode:"aspectFill",src:"/static/img/home/forward-button.png"}})],1)],1)})),1)],1)],1)],1)},i=[]},b011:function(e,t,n){var r=n("c5d9");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("4f06").default;a("2deab370",r,!0,{sourceMap:!1,shadowMode:!1})},c5d9:function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,"uni-page-body[data-v-2af8e87d]{background-color:#f5f5f5}.container .container-top[data-v-2af8e87d]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100vw;height:%?200?%;background-image:url(/static/img/home/mine-bg.png);background-repeat:no-repeat;background-size:100% 100%;padding:0 %?32?%}.container .container-top .top-img[data-v-2af8e87d]{width:%?120?%;height:%?120?%;overflow:hidden;-webkit-border-radius:%?20?%;border-radius:%?20?%}.container .container-top .top-content[data-v-2af8e87d]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-left:%?20?%;font-family:Source Han Sans CN Regular,Source Han Sans CN Regular-Regular}.container .container-top .top-content .content-name[data-v-2af8e87d]{font-size:%?36?%;font-weight:400;color:#fff;line-height:%?72?%}.container .container-top .top-content .content-phone[data-v-2af8e87d]{font-size:%?28?%;color:#7ebafe}.container .container-top .top-right[data-v-2af8e87d]{width:%?19?%;height:%?27?%}.container .container-main[data-v-2af8e87d]{width:100vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:0 %?20?%}.container .container-main .main-item[data-v-2af8e87d]{background-color:#fff;-webkit-border-radius:%?16?%;border-radius:%?16?%;overflow:hidden;width:100%}.container .container-main .main-func[data-v-2af8e87d]{height:%?112?%;width:100%;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?2?% solid #f5f5f5}.container .container-main .main-func .func-img[data-v-2af8e87d]{margin-left:%?36?%;width:%?52?%;height:%?52?%;overflow:hidden;-webkit-border-radius:50%;border-radius:50%}.container .container-main .main-func .func-title[data-v-2af8e87d]{margin-left:%?26?%;font-size:%?30?%;font-family:Adobe Heiti Std R,Adobe Heiti Std R-R;color:#8a8a8a;letter-spacing:%?2?%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.container .container-main .main-func .func-icon[data-v-2af8e87d]{width:%?340?%;height:%?64?%;padding-right:%?30?%;overflow:hidden;white-space:nowrap;text-align:right}.container .container-main .main-func .func-icon[data-v-2af8e87d]::-webkit-scrollbar{width:0;height:0;color:transparent}.container .container-main .main-func .func-icon .icon-add[data-v-2af8e87d]{width:%?63?%;height:%?64?%;display:inline-block;overflow:hidden;-webkit-border-radius:50%;border-radius:50%;margin-right:%?24?%}.container .container-main .main-func .func-phone[data-v-2af8e87d]{font-size:%?30?%;color:#3cb2ef;margin-right:%?24?%}.container .container-main .main-func .func-right[data-v-2af8e87d]{width:%?16?%;height:%?24?%;margin-right:%?24?%}.container .container-main .main-one[data-v-2af8e87d]{margin-top:%?26?%;margin-bottom:%?20?%;-webkit-border-radius:%?12?%;border-radius:%?12?%;overflow:hidden}body.?%PAGE?%[data-v-2af8e87d]{background-color:#f5f5f5}",""]),e.exports=t},cd8d:function(e,t,n){"use strict";n.r(t);var r=n("2f4e"),a=n("01a1");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("d922");var o,u=n("f0c5"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"2af8e87d",null,!1,r["a"],o);t["default"]=c.exports},d922:function(e,t,n){"use strict";var r=n("b011"),a=n.n(r);a.a}}]);