(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["parent-security-kiss-number"],{1932:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"uni-page-body[data-v-10605983]{background-color:#f5f5f5}body.?%PAGE?%[data-v-10605983]{background-color:#f5f5f5}",""]),e.exports=t},"2e4a":function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[e.whetherAddEdit?i("kiss-handle",{attrs:{disabled:e.handleDisable,datas:e.handleDate,types:e.handleType,editIdx:e.handleDitIdx},on:{handleSave:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSave.apply(void 0,arguments)},handleCancel:function(t){arguments[0]=t=e.$handleEvent(t),e.handleCancel.apply(void 0,arguments)}}}):i("kiss-main",{attrs:{moreData:"4",whilteList:e.kissNumList,whetherEdit:e.whetherEdit},on:{swiperChange:function(t){arguments[0]=t=e.$handleEvent(t),e.swiperChange.apply(void 0,arguments)},interchangeDate:function(t){arguments[0]=t=e.$handleEvent(t),e.interchangeDate.apply(void 0,arguments)},editorDate:function(t){arguments[0]=t=e.$handleEvent(t),e.editorDate.apply(void 0,arguments)},deleteDate:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteDate.apply(void 0,arguments)},saveDate:function(t){arguments[0]=t=e.$handleEvent(t),e.saveDate.apply(void 0,arguments)},addDate:function(t){arguments[0]=t=e.$handleEvent(t),e.addDate.apply(void 0,arguments)},dateilDate:function(t){arguments[0]=t=e.$handleEvent(t),e.dateilDate.apply(void 0,arguments)}}})],1)},s=[]},"3a59":function(e,t,i){"use strict";var n=i("4ea4");i("99af"),i("4160"),i("d81d"),i("a434"),i("ac1f"),i("466d"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var a=n(i("1da1")),s=i("9ff2"),r=n(i("73f4")),d=n(i("8f0c")),u={components:{kissHandle:r.default,kissMain:d.default},data:function(){return{operatorId:null,imei:null,status:null,simId:null,kissNumList:[],whetherEdit:!1,whetherAddEdit:!1,handleDisable:!1,handleDate:{},handleType:1,handleDitIdx:"",whilteList:[],removeList:[]}},onLoad:function(e){this.getInitDate(e)},methods:{getInitDate:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var n,a,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.operatorId=(0,s.getOperatorId)(),t.imei=e.imei,i.next=4,(0,s.getCardParam)(e.imei);case 4:return n=i.sent,a=n.status,t.status=a,t.simId=uni.getStorageSync("cardDate")&&uni.getStorageSync("cardDate").simNumber||null,r={imei:e.imei,range:"1"},i.next=11,t.getKissNumber(r);case 11:return t.kissNumList=i.sent,r.range="0",i.next=15,t.getKissNumber(r);case 15:t.whilteList=i.sent;case 16:case"end":return i.stop()}}),i)})))()},getKissNumber:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,(0,s.getWhiltList)(e);case 2:if(n=i.sent,!n){i.next=7;break}return a=[],n.forEach((function(e){a.push({imei:t.imei,operatorId:t.operatorId,id:e.id,faceUrl:e.faceUrl?e.faceUrl:"",name:e.name,phone:e.simId,range:"1",index:e.number,remove:"0",select:!1})})),i.abrupt("return",a);case 7:case 8:case"end":return i.stop()}}),i)})))()},editorDate:function(e){var t=e.val,i=e.idx;this.handleDate=t,this.handleDitIdx=i,this.handleDisable=!1,this.whetherAddEdit=!0,this.handleType=3},deleteDate:function(e){var t=this,i=e.idx;uni.showModal({title:"删除操作",content:"确定删除该亲情号码吗?",success:function(e){e.confirm&&(t.kissNumList[i].remove="1",t.removeList.push(t.kissNumList[i]),t.kissNumList.splice(i,1),t.changeNumber(t.kissNumList),t.whetherEdit=!0,t.$Q.tipUrl({tip:"删除成功,保存数据才能生效"}))}})},dateilDate:function(e){var t=e.val;this.handleType=1,this.handleDate=t,this.handleDisable=!0,this.whetherAddEdit=!0},handleCancel:function(){this.whetherAddEdit=!1},handleSave:function(e){var t=e.val,i=e.idx;if(t.name)if(t.name.match(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g))this.$Q.tipUrl({tip:"不能输入表情"});else if(/^1[3-9]{1}[0-9]{9}$/.test(t.phone))if(t.phone==this.simId)this.$Q.tipUrl({tip:"不能与学生证号码重复"});else{if((0,s.isWhetherRepeat)(this.kissNumList,t.name,t.phone,i,this.whilteList,-1))return;var n=this.kissNumList;3==this.handleType?(n[i]=t,this.changeNumber(n)):(n.push(t),this.changeNumber(n)),this.whetherEdit=!0,this.whetherAddEdit=!1}else this.$Q.tipUrl({tip:"请输入正确的手机号"});else this.$Q.tipUrl({tip:"请输入姓名"})},addDate:function(){this.kissNumList.length>=4?this.$Q.tipUrl({tip:"情亲号码只能四个"}):(this.handleType=2,this.handleDate={imei:this.imei,operatorId:this.operatorId,faceUrl:"",name:"",phone:"",range:"1",index:1,remove:"0",select:!1},this.whetherAddEdit=!0)},swiperChange:function(e){var t=e.val,i=e.idx;"right"==t?this.kissNumList.map((function(e,t){e.select=t==i})):"none"==t&&this.kissNumList.map((function(e,t){t==i&&(e.select=!1)}))},interchangeDate:function(e){var t,i,n=e.idx,a=this.kissNumList,s=this.kissNumList.length-1;i=0==n?s:n-1,t=a[n],a[n]=a[i],a[i]=t,this.changeNumber(a),this.whetherEdit=!0},changeNumber:function(e){e.map((function(e,t){e.index=t+1})),this.kissNumList=e},saveDate:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var i,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.kissNumList.concat(e.removeList),console.log(i),n={requestBody:i},t.next=5,(0,s.setFanceHandle)(e.status,n);case 5:a=t.sent,a&&(e.$Q.tipUrl({tip:a}),e.whetherEdit=!1);case 7:case"end":return t.stop()}}),t)})))()}}};t.default=u},4809:function(e,t,i){"use strict";i.r(t);var n=i("2e4a"),a=i("d42f");for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("bcaf");var r,d=i("f0c5"),u=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"10605983",null,!1,n["a"],r);t["default"]=u.exports},bcaf:function(e,t,i){"use strict";var n=i("c70a"),a=i.n(n);a.a},c70a:function(e,t,i){var n=i("1932");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("5c24bc88",n,!0,{sourceMap:!1,shadowMode:!1})},d42f:function(e,t,i){"use strict";i.r(t);var n=i("3a59"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a}}]);