(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["parent-home-select-role"],{"0dcc":function(t,e,n){"use strict";var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.boundSaveInfo=e.getVertryCode=e.getOpenIDList=e.setStateRecords=e.getPhoneDate=e.setDeleteStudent=e.setSwicthStudent=e.getChilderList=e.addBindStudent=e.getClassesList=e.getFieldList=void 0,n("96cf");var i=r(n("1da1")),a=r(n("368e")),o=n("033a"),s=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],t.next=3,a.default.post(o.COM_FIELD_LIST,{field:e},{load:n});case 3:if(r=t.sent,0!=r.code||!r.data.length){t.next=8;break}return t.abrupt("return",r.data);case 8:return t.abrupt("return",[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getFieldList=s;var u=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.post(o.COM_AREA_SCHOOL_CLASSES_LIST);case 2:if(e=t.sent,0!=e.code||!e.data.length){t.next=7;break}return t.abrupt("return",e.data);case 7:return m("获取学校班级列表数据为空,联系客服"),t.abrupt("return",[]);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.getClassesList=u;var c=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.post(o.ADD_PARENT_BIND_STUDENT,e);case 2:if(n=t.sent,200!=n.code||1!=n.status){t.next=11;break}if(!n.data||!n.data.student){t.next=8;break}return t.abrupt("return",n.data);case 8:m("数据返回有误,联系客服");case 9:t.next=12;break;case 11:m(n.msg);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.addBindStudent=c;var f=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.post(o.GET_PARENT_STUDENT_LIST,{parentId:e});case 2:if(n=t.sent,0!=n.code){t.next=11;break}if(!n.data){t.next=8;break}return t.abrupt("return",n.data);case 8:return t.abrupt("return",[]);case 9:t.next=12;break;case 11:m(n.msg);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getChilderList=f;var l=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.post(o.SET_PARENT_STUDENT_LOGIN_INFO,e);case 2:if(n=t.sent,200!=n.code||1!=n.status){t.next=7;break}return t.abrupt("return","ok");case 7:m(childrenDate.msg);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.setSwicthStudent=l;var d=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.index){t.next=14;break}return t.next=3,uni.showModal({title:"删除绑定学生",content:"确定删除"+n.student.studentName+"?"});case 3:if(r=t.sent,!r[1].confirm){t.next=14;break}return t.next=7,a.default.post(o.REMOVE_PARENT_BIND_STUDENT,{parentId:n.studentParentId,studentId:n.studentId});case 7:if(i=t.sent,200!=i.code||1!=i.status){t.next=13;break}return m("删除成功"),t.abrupt("return","ok");case 13:m(i.msg);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();e.setDeleteStudent=d;var p=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",t.next=3,a.default.post(o.GET_ADDRESS_BOOK_BY_PARENT,{studentId:e,param:n});case 3:if(r=t.sent,!r){t.next=6;break}return t.abrupt("return",r);case 6:return t.abrupt("return",{});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getPhoneDate=p;var b=function(t){a.default.post(o.SET_LOGIN_INFO,{id:t},{load:!1})};e.setStateRecords=b;var h=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.post(o.GET_USER_INFO_LIST,{openId:e});case 2:if(n=t.sent,200!=n.code||1!=n.status){t.next=11;break}if(!Array.isArray(n.data)){t.next=8;break}return t.abrupt("return",n.data);case 8:return t.abrupt("return",[]);case 9:t.next=13;break;case 11:return m(n.msg),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getOpenIDList=h;var v=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.default.post(o.BOUND_VERIFY_CODE,e);case 2:if(n=t.sent,200!=n.code){t.next=11;break}if(1!=n.status){t.next=8;break}return t.abrupt("return",n.data);case 8:m("获取验证码失败,请重试");case 9:t.next=12;break;case 11:m(n.msg);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getVertryCode=v;var g=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.openId){t.next=3;break}return m("数据openId不存在,联系客服"),t.abrupt("return");case 3:return t.next=5,a.default.post(o.BOUND_SAVE_BIND,e);case 5:if(n=t.sent,200!=n.code){t.next=14;break}if(1!=n.status){t.next=11;break}return t.abrupt("return",n.data);case 11:m("绑定失败,重新绑定");case 12:t.next=15;break;case 14:m(n.msg);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.boundSaveInfo=g;var m=function(t){uni.showToast({duration:3e3,title:t,icon:"none",mask:!0})}},"1f6e2":function(t,e,n){"use strict";n("c975"),n("a9e3"),n("b64b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={name:"u-toast",props:{zIndex:{type:[Number,String],default:""}},data:function(){return{isShow:!1,timer:null,config:{params:{},title:"",type:"",duration:2e3,isTab:!1,url:"",icon:!0,position:"center",callback:null,back:!1},tmpConfig:{}}},computed:{iconName:function(){if(["error","warning","success","info"].indexOf(this.tmpConfig.type)>=0&&this.tmpConfig.icon){var t=this.$u.type2icon(this.tmpConfig.type);return t}},uZIndex:function(){return this.isShow?this.zIndex?this.zIndex:this.$u.zIndex.toast:"999999"}},methods:{show:function(t){var e=this;this.tmpConfig=this.$u.deepMerge(this.config,t),this.timer&&(clearTimeout(this.timer),this.timer=null),this.isShow=!0,this.timer=setTimeout((function(){e.isShow=!1,clearTimeout(e.timer),e.timer=null,"function"===typeof e.tmpConfig.callback&&e.tmpConfig.callback(),e.timeEnd()}),this.tmpConfig.duration)},hide:function(){this.isShow=!1,this.timer&&(clearTimeout(this.timer),this.timer=null)},timeEnd:function(){if(this.tmpConfig.url){if("/"!=this.tmpConfig.url[0]&&(this.tmpConfig.url="/"+this.tmpConfig.url),Object.keys(this.tmpConfig.params).length){var t="";/.*\/.*\?.*=.*/.test(this.tmpConfig.url)?(t=this.$u.queryParams(this.tmpConfig.params,!1),this.tmpConfig.url=this.tmpConfig.url+"&"+t):(t=this.$u.queryParams(this.tmpConfig.params),this.tmpConfig.url+=t)}this.tmpConfig.isTab?uni.switchTab({url:this.tmpConfig.url}):uni.navigateTo({url:this.tmpConfig.url})}else this.tmpConfig.back&&this.$u.route({type:"back"})}}};e.default=r},"20c1":function(t,e,n){"use strict";var r=n("71da"),i=n.n(r);i.a},"2b6f":function(t,e,n){"use strict";var r=n("4ea4");n("4de4"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=r(n("1da1")),a=n("0dcc"),o={data:function(){return{identityList:[],selectIndex:null,wxOpenId:null}},onLoad:function(){this.getInitDate()},methods:{getInitDate:function(){try{var t=uni.getStorageSync("openId");t?this.wxOpenId=t:this.getInitDate(),this.getIdentityDate()}catch(e){console.log("获取数据失败")}},getIdentityDate:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getFieldList)("wxUserType");case 2:n=e.sent,n.length&&(t.identityList=n,t.selectIndex=n[0].code);case 4:case"end":return e.stop()}}),e)})))()},slectContent:function(t){this.selectIndex=t},nextstep:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,r,i,o,s,u,c,f,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.selectIndex,t.wxOpenId){e.next=5;break}return t.$Q.tipUrl({tip:"获取到OPENID失败,重新进入"}),e.abrupt("return");case 5:return e.next=7,(0,a.getOpenIDList)(t.wxOpenId);case 7:if(r=e.sent,0!=n){e.next=17;break}if(i=r.filter((function(t){return 0==t.userType})),!(i.length>0)){e.next=14;break}return o=i[0],o.student?(uni.setStorageSync("roleType",String(o.userType)),uni.setStorageSync("userId",o.student.userId),uni.setStorageSync("student",o.student),t.navToIndex("已经绑定学生账号",o.id)):t.$Q.tipUrl({tip:"数据异常,重新绑定",url:"/parent/home/parent-bind?type="+n}),e.abrupt("return");case 14:uni.navigateTo({url:"/parent/home/parent-bind?type="+n}),e.next=44;break;case 17:if(1!=n){e.next=35;break}if(s=r.filter((function(t){return 1==t.userType&&t.studentParent})),!(s.length>0)){e.next=32;break}if(u=s[0],!u.userId){e.next=30;break}return uni.setStorageSync("roleType",u.userType),uni.setStorageSync("parentId",u.userId),e.next=26,(0,a.getChilderList)(u.userId);case 26:c=e.sent,c.length>0?(f=c.filter((function(t){return t.loginFlag})),l=f.length>0?f[0]:c[0],uni.setStorageSync("userId",l.userId),uni.setStorageSync("student",l.student),t.navToIndex("已经绑定家长账号",u.id)):t.$Q.tipUrl({tip:"没有获取到绑定的孩子",url:"/parent/home/add-baby"}),e.next=31;break;case 30:t.$Q.tipUrl({tip:"数据异常,重新绑定",url:"/parent/home/parent-bind?type="+n});case 31:return e.abrupt("return");case 32:uni.navigateTo({url:"/parent/home/parent-bind?type="+n}),e.next=44;break;case 35:if(2!=n){e.next=44;break}return t.$Q.tipUrl({tip:"此版本还没有做老师版本"}),e.abrupt("return");case 43:uni.navigateTo({url:"/tearch/home/tearch-bind?type="+n});case 44:e.next=49;break;case 46:e.prev=46,e.t0=e["catch"](0),console.log("切换角色遇到异常"+e.t0);case 49:case"end":return e.stop()}}),e,null,[[0,46]])})))()},navToIndex:function(t,e){(0,a.setStateRecords)(e),this.$Q.tipUrl({tip:t,url:"/pages/index/index",isTab:!0})}}};e.default=o},"4a83":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".select[data-v-0cf3f796]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-family:Noto Sans S Chinese Regular}.select .select-top[data-v-0cf3f796]{background-color:#f6f6f6;height:19vh;width:100vw;padding:%?40?%}.select .select-top .top-identity[data-v-0cf3f796]{font-size:%?36?%;color:#000;line-height:%?72?%}.select .select-top .top-show[data-v-0cf3f796]{font-size:%?30?%;color:#828080;line-height:%?64?%}.select .select-content[data-v-0cf3f796]{background-color:#fff;padding:%?53?% %?40?%;width:100vw;height:71vh}.select .select-content .content-item[data-v-0cf3f796]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?670?%;height:%?145?%;background-color:#f8f8f8;-webkit-border-radius:%?20?%;border-radius:%?20?%;padding:0 %?50?%;margin-bottom:%?25?%}.select .select-content .content-item .item-identity[data-v-0cf3f796]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.select .select-content .content-item .item-identity .identity-name[data-v-0cf3f796]{color:#000;font-size:%?30?%;line-height:%?60?%}.select .select-content .content-item .item-identity .identity-content[data-v-0cf3f796]{font-size:%?24?%;color:#484747;line-height:%?32?%}.select .select-bottom[data-v-0cf3f796]{position:fixed;bottom:0;left:0;background-color:#0095fa;width:100vw;height:10vh;font-size:%?38?%;color:#fff;font-weight:600;line-height:10vh;text-align:center}",""]),t.exports=e},"71da":function(t,e,n){var r=n("c005");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("4f06").default;i("4d7edc71",r,!0,{sourceMap:!1,shadowMode:!1})},"73a8":function(t,e,n){"use strict";n.r(e);var r=n("1f6e2"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},7542:function(t,e,n){var r=n("4a83");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("4f06").default;i("74acd206",r,!0,{sourceMap:!1,shadowMode:!1})},"777f":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}));var r={uToast:n("952e").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"select"},[n("v-uni-view",{staticClass:"select-top"},[n("v-uni-view",{staticClass:"top-identity"},[t._v("请选择你的身份")]),n("v-uni-view",{staticClass:"top-show"},[t._v("我们会对每种设定的身份来给功能权限")])],1),n("v-uni-view",{staticClass:"select-content"},[t._l(t.identityList,(function(e,r){return[n("v-uni-view",{key:r+"_0",staticClass:"content-item",style:t.selectIndex==e.code?"border: 4rpx solid #0095fa;":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.slectContent(e.code)}}},[n("v-uni-view",{staticClass:"item-identity"},[n("v-uni-view",{staticClass:"identity-name"},[t._v(t._s(e.codedesc))]),n("v-uni-view",{staticClass:"identity-content"},[t._v(t._s(e.remark))])],1),n("v-uni-view",{staticClass:"item-option"},[t.selectIndex==e.code?n("v-uni-text",{staticClass:"iconfont icon-xuanzhong",staticStyle:{"font-size":"50rpx",color:"#0095fa"}}):n("v-uni-text",{staticClass:"iconfont icon-weixuanzhong",staticStyle:{"font-size":"56rpx",color:"#e5e6e8"}})],1)],1)]}))],2),n("v-uni-view",{staticClass:"select-bottom",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nextstep.apply(void 0,arguments)}}},[t._v("下一步")]),n("u-toast",{ref:"uToast"})],1)],1)},a=[]},"952e":function(t,e,n){"use strict";n.r(e);var r=n("ff78"),i=n("73a8");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("20c1");var o,s=n("f0c5"),u=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"2a6a561c",null,!1,r["a"],o);e["default"]=u.exports},afaa:function(t,e,n){"use strict";n.r(e);var r=n("2b6f"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},c005:function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".u-toast[data-v-2a6a561c]{position:fixed;z-index:-1;-webkit-transition:opacity .3s;transition:opacity .3s;text-align:center;color:#fff;-webkit-border-radius:%?8?%;border-radius:%?8?%;background:#585858;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?28?%;opacity:0;pointer-events:none;padding:%?18?% %?40?%}.u-toast.u-show[data-v-2a6a561c]{opacity:1}.u-icon[data-v-2a6a561c]{margin-right:%?10?%;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:normal}.u-position-center[data-v-2a6a561c]{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-width:70%}.u-position-top[data-v-2a6a561c]{left:50%;top:20%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.u-position-bottom[data-v-2a6a561c]{left:50%;bottom:20%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.u-type-primary[data-v-2a6a561c]{color:#2979ff;background-color:#ecf5ff;border:1px solid #d7eafe}.u-type-success[data-v-2a6a561c]{color:#19be6b;background-color:#dbf1e1;border:1px solid #bef5c8}.u-type-error[data-v-2a6a561c]{color:#fa3534;background-color:#fef0f0;border:1px solid #fde2e2}.u-type-warning[data-v-2a6a561c]{color:#f90;background-color:#fdf6ec;border:1px solid #faecd8}.u-type-info[data-v-2a6a561c]{color:#909399;background-color:#f4f4f5;border:1px solid #ebeef5}.u-type-default[data-v-2a6a561c]{color:#fff;background-color:#585858}",""]),t.exports=e},d256:function(t,e,n){"use strict";var r=n("7542"),i=n.n(r);i.a},e095:function(t,e,n){"use strict";n.r(e);var r=n("777f"),i=n("afaa");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("d256");var o,s=n("f0c5"),u=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"0cf3f796",null,!1,r["a"],o);e["default"]=u.exports},ff78:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}));var r={uIcon:n("f082").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"u-toast",class:[t.isShow?"u-show":"","u-type-"+t.tmpConfig.type,"u-position-"+t.tmpConfig.position],style:{zIndex:t.uZIndex}},[n("v-uni-view",{staticClass:"u-icon-wrap"},[t.tmpConfig.icon?n("u-icon",{staticClass:"u-icon",attrs:{name:t.iconName,size:30,color:t.tmpConfig.type}}):t._e()],1),n("v-uni-text",{staticClass:"u-text"},[t._v(t._s(t.tmpConfig.title))])],1)},a=[]}}]);